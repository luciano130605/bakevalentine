<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Bake Valentine</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<style>
body { padding: 20px; font-family: sans-serif; }
.producto-admin { border: 1px solid #ccc; border-radius: 10px; padding: 15px; margin-bottom: 15px; }
</style>
</head>
<body>
<h1>Panel de Admin</h1>

<div id="loginDiv">
<h3>Login</h3>
<div class="mb-2">
<input type="text" id="user" class="form-control" placeholder="Usuario">
</div>
<div class="mb-2">
<input type="password" id="pass" class="form-control" placeholder="Contraseña">
</div>
<button class="btn btn-primary" onclick="login()">Entrar</button>
<p id="loginError" style="color:red;"></p>
</div>

<div id="adminDiv" style="display:none;">
<h3>Productos</h3>
<div id="productosContainer"></div>
<hr>
<h3>Agregar Producto</h3>
<div class="mb-2">
<input type="text" id="newNombre" class="form-control" placeholder="Nombre">
</div>
<div class="mb-2">
<input type="text" id="newPrecio" class="form-control" placeholder="Precio">
</div>
<div class="mb-2">
<input type="text" id="newImg" class="form-control" placeholder="URL de Imagen">
</div>
<div class="mb-2 form-check">
<input type="checkbox" id="newDisponible" class="form-check-input" checked>
<label for="newDisponible" class="form-check-label">Disponible</label>
</div>
<button class="btn btn-success" onclick="agregarProducto()">Agregar</button>
</div>

<script>
const USER = "valentina";
const PASS = "1812";
const STORAGE_KEY = "alfajoresProductos"; // clave unificada con alfajores.html

let productos = [
    { nombre:"Postre Chocotorta", img:"postrechocotorta.jpeg", precio:"$6500", disponible:true },
    { nombre:"Postre Oreo", img:"postreoreo.jpeg", precio:"$6500", disponible:true },
    { nombre:"Postre próximo", img:"", precio:"$6500", disponible:true},
    { nombre:"Alfajor 1", img:"alfajor.jpeg", precio:"$000", disponible: true},
    { nombre:"Alfajor 2", img:"alfajor.jpeg", precio:"$000", disponible: true},
    { nombre:"Alfajor 3", img:"alfajor.jpeg", precio:"$000", disponible: true},
    { nombre:"Alfajor 4", img:"alfajor.jpeg", precio:"$000", disponible: true},
];

// Cargar de localStorage si existe
const productosGuardados = localStorage.getItem(STORAGE_KEY);
if (productosGuardados) productos = JSON.parse(productosGuardados);

function login(){
    const u = document.getElementById('user').value;
    const p = document.getElementById('pass').value;
    if(u === USER && p === PASS){
        document.getElementById('loginDiv').style.display = 'none';
        document.getElementById('adminDiv').style.display = 'block';
        mostrarProductosAdmin();
    } else {
        document.getElementById('loginError').innerText = 'Usuario o contraseña incorrecta';
    }
}

function mostrarProductosAdmin(){
    const container = document.getElementById('productosContainer');
    container.innerHTML = '';
    productos.forEach((p,index)=>{
        const div = document.createElement('div');
        div.className = 'producto-admin';
        div.innerHTML = `
            <div class="mb-2"><strong>Nombre:</strong> <input type="text" value="${p.nombre}" id="nombre${index}" class="form-control"></div>
            <div class="mb-2"><strong>Precio:</strong> <input type="text" value="${p.precio}" id="precio${index}" class="form-control"></div>
            <div class="mb-2"><strong>Imagen:</strong> <input type="text" value="${p.img}" id="img${index}" class="form-control"></div>
            <div class="mb-2 form-check">
                <input type="checkbox" id="disponible${index}" class="form-check-input" ${p.disponible ? "checked" : ""}>
                <label for="disponible${index}" class="form-check-label">Disponible</label>
            </div>
            <button class="btn btn-primary btn-sm mb-2" onclick="guardarProducto(${index})">Guardar</button>
            <button class="btn btn-danger btn-sm mb-2" onclick="eliminarProducto(${index})">Eliminar</button>
        `;
        container.appendChild(div);
    });
}

function guardarProducto(index){
    const nombre = document.getElementById('nombre'+index).value;
    const precio = document.getElementById('precio'+index).value;
    const img = document.getElementById('img'+index).value;
    const disponible = document.getElementById('disponible'+index).checked;
    productos[index] = { nombre, precio, img, disponible };
    localStorage.setItem(STORAGE_KEY, JSON.stringify(productos));
    alert('Producto guardado!');
}

function eliminarProducto(index){
    if(confirm('Eliminar este producto?')){
        productos.splice(index,1);
        localStorage.setItem(STORAGE_KEY, JSON.stringify(productos));
        mostrarProductosAdmin();
    }
}

function agregarProducto(){
    const nombre = document.getElementById('newNombre').value;
    const precio = document.getElementById('newPrecio').value;
    const img = document.getElementById('newImg').value;
    const disponible = document.getElementById('newDisponible').checked;
    if(!nombre || !precio || !img){ alert('Completa todos los campos'); return; }
    productos.push({nombre, precio, img, disponible});
    localStorage.setItem(STORAGE_KEY, JSON.stringify(productos));
    document.getElementById('newNombre').value = '';
    document.getElementById('newPrecio').value = '';
    document.getElementById('newImg').value = '';
    document.getElementById('newDisponible').checked = true;
    mostrarProductosAdmin();
}
</script>
</body>
</html>
