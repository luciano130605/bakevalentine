<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bake Valentine - Pepas y Scones</title>
  <link rel="stylesheet" href="productos.css">
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</head>

<body>
  <div class="container">
    <h1 class="titulo text-center my-4">Pepas y Scones</h1>

    <div class="row g-4" id="productosContainer">
      <!-- Aquí se generarán los productos dinámicamente -->
    </div>
  </div>

  <!-- Modal único para Pepas y Scones -->
  <div class="modal fade" id="modalProducto" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="modalTitle" style="color: #3877AA">>Seleccioná masa y cantidad</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body text-center" id="modalBody"></div>
        <div class="modal-footer">
          <button class="btn btn-success w-100" onclick="pedirWhatsApp()">Pedir por WhatsApp</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Popup imagen -->
  <div id="popup" class="popup">
    <span class="cerrar" onclick="cerrarPopup()">&times;</span>
    <img class="popup-img" id="imagenAmpliada" src="">
  </div>

  <script>
    const productos = [
      {
        nombre: "Pepa de Membrillo",
        img: "pepamembrillo.jpeg",
        opciones: {
          masa: ["Vainilla", "Chocolate"],
          cantidad: [
            { nombre: "6 unidades", precio: 3000 },
            { nombre: "12 unidades", precio: 5000 }
          ]
        }
      },
      {
        nombre: "Pepa de Dulce de Leche",
        img: "pepaddl.jpeg",
        opciones: {
          masa: ["Vainilla", "Chocolate"],
          cantidad: [
            { nombre: "6 unidades", precio: 3000 },
            { nombre: "12 unidades", precio: 5000 }
          ]
        }
      },
      {
        nombre: "Pepa de Batata",
        img: "pepabatata.jpeg",
        opciones: {
          masa: ["Vainilla", "Chocolate"],
          cantidad: [
            { nombre: "6 unidades", precio: 3000 },
            { nombre: "12 unidades", precio: 5000 }
          ]
        }
      },
      {
        nombre: "Scone",
        img: "scones.jpeg",
        descripcion: "Scone dulce con masa casera de limón.",
        opciones: {
          cantidad: [
            { nombre: "6 unidades", precio: 4700 },
            { nombre: "12 unidades", precio: 8500 }
          ]
        }
      }
    ];

    let productoSeleccionado = null;

    function abrirImagen(img) {
      document.getElementById("popup").style.display = "block";
      document.getElementById("imagenAmpliada").src = img.src;
    }

    function cerrarPopup() {
      document.getElementById("popup").style.display = "none";
    }

    function mostrarProductos() {
      const container = document.getElementById("productosContainer");
      productos.forEach(producto => {
        const div = document.createElement("div");
        div.classList.add("col-6", "col-md-3");
        div.innerHTML = `
          <div class="producto text-center">
            <img src="${producto.img}" onclick="abrirImagen(this)">
            <h3>${producto.nombre}</h3>
            ${producto.descripcion ? `<p>${producto.descripcion}</p>` : ""}
            <button class="btn btn-success w-100 mt-2" onclick="seleccionarProducto('${producto.nombre}')">
              <i class="fab fa-whatsapp"></i> Pedir
            </button>
          </div>
        `;
        container.appendChild(div);
      });
    }

    function seleccionarProducto(nombre) {
      productoSeleccionado = productos.find(p => p.nombre === nombre);
      const modalBody = document.getElementById("modalBody");
      const modalTitle = document.getElementById("modalTitle");
      modalTitle.innerText = `Seleccioná opciones para ${productoSeleccionado.nombre}`;
      modalBody.innerHTML = "";

      // Masa (solo si existe)
      if (productoSeleccionado.opciones.masa) {
        modalBody.innerHTML += "<strong>Masa:</strong><br>";
        productoSeleccionado.opciones.masa.forEach((m, i) => {
          modalBody.innerHTML += `<label><input type="radio" name="masa" value="${m}" ${i === 0 ? "checked" : ""}> ${m}</label><br>`;
        });
        modalBody.innerHTML += "<br>";
      }

      // Cantidad
      modalBody.innerHTML += "<strong>Cantidad:</strong><br>";
      productoSeleccionado.opciones.cantidad.forEach((c, i) => {
        modalBody.innerHTML += `<label><input type="radio" name="cantidad" value="${c.nombre}" ${i === 0 ? "checked" : ""}> ${c.nombre}: $${c.precio}</label><br>`;
      });

      const modal = new bootstrap.Modal(document.getElementById("modalProducto"));
      modal.show();
    }

    function pedirWhatsApp() {
      if (!productoSeleccionado) return alert("Seleccioná primero un producto");
      const masa = productoSeleccionado.opciones.masa
        ? document.querySelector('input[name="masa"]:checked')?.value
        : null;
      const cantidad = document.querySelector('input[name="cantidad"]:checked')?.value;

      let mensaje = `Hola! Quiero pedir ${productoSeleccionado.nombre}`;
      if (masa) mensaje += ` con masa de ${masa}`;
      mensaje += `, cantidad: ${cantidad}`;

      const numero = "541131121121";
      const url = `https://wa.me/${numero}?text=${encodeURIComponent(mensaje)}`;
      window.open(url, "_blank");
    }

    document.addEventListener("DOMContentLoaded", mostrarProductos);

    document.addEventListener('DOMContentLoaded', () => {
      if (localStorage.getItem('modo') === 'dark') {
        document.body.classList.add('dark-mode');
      }
    });
  </script>

</body>

</html>