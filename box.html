<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bake Valentine</title>
<link rel="stylesheet" href="productos.css">
<link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</head>

<body>
<div class="container">
  <h1 class="titulo text-center my-4">Box</h1>
  <div class="row g-4" id="productosContainer"></div>
</div>

<!-- Modal único para box -->
<div class="modal fade" id="modalProducto" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modalTitle" style="color:#3877AA">Seleccioná</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body text-center" id="modalBody"></div>
      <div class="modal-footer">
        <button class="btn btn-success w-100" onclick="pedirWhatsApp()">Pedir por WhatsApp</button>
      </div>
    </div>
  </div>
</div>

<script>
const productos = [
  {
    nombre:"Box 1",
    img:"box1.jpeg",
    opciones:{
      "1": ["Pizza", "..", "Postre"],
      "2": ["Hamburguesa", "Papas", "Refresco"]
    },
    lanzamiento:"2026-08-21T13:10:00"
  },
  {
    nombre:"Box 2",
    img:"box2.jpeg",
    opciones:{
      "1": ["Pizza", "..", "Postre"],
      "2": ["Hamburguesa", "Papas", "Refresco"]
    },
    lanzamiento:"2026-08-21T13:10:00"
  },
  {
    nombre:"Box 3",
    img:"box1.jpeg",
    opciones:{
      "1": ["Pizza", "..", "Postre"],
      "2": ["Hamburguesa", "Papas", "Refresco"]
    },
    lanzamiento:"2026-08-21T13:10:00"
  },
  {
    nombre:"Box 4",
    img:"box1.jpeg",
    opciones:{
      "1": ["Pizza", "..", "Postre"],
      "2": ["Hamburguesa", "Papas", "Refresco"]
    },
    lanzamiento:"2026-08-21T13:10:00"
  },
];

let productoSeleccionado = null;

// Mostrar productos
function mostrarProductos(){
  const container = document.getElementById("productosContainer");
  container.innerHTML="";
  const ahora = new Date().getTime();

  productos.forEach((producto)=>{
    const disponible = new Date(producto.lanzamiento).getTime() <= ahora;
    const div = document.createElement("div");
    div.classList.add("col-6","col-md-3");

    div.innerHTML=`
      <div class="producto position-relative text-center">
        <img src="${producto.img}" style="cursor:pointer;">
        ${!disponible ? `<div class="overlay">Próximamente</div>` : ""}
        <h3>${producto.nombre}</h3>
        ${disponible?`<button class="btn btn-success w-100 mt-2">Pedir</button>`:""}
      </div>
    `;

    container.appendChild(div);

    const img = div.querySelector("img");
    if(disponible){
        const btn = div.querySelector("button");
        if(btn) btn.addEventListener("click",()=>seleccionarProducto(producto.nombre));
    }
  });
}

// Modal con opciones + ?
function seleccionarProducto(nombre){
  productoSeleccionado = productos.find(p=>p.nombre===nombre);
  const modalBody = document.getElementById("modalBody");
  const modalTitle = document.getElementById("modalTitle");
  modalTitle.innerText=`Seleccioná opciones para ${productoSeleccionado.nombre}`;
  modalBody.innerHTML="";

  if(productoSeleccionado.opciones){
    Object.keys(productoSeleccionado.opciones).forEach((key,i)=>{
      const opcionesTexto = productoSeleccionado.opciones[key].join(", ");
      const div = document.createElement("div");
      div.classList.add("mb-2");
      div.innerHTML = `
        <label>
          <input type="radio" name="opcion" value="${key}" ${i===0?"checked":""}>
          Opción ${key} 
          <span class="badge bg-info text-dark" tabindex="0" data-bs-toggle="popover" data-bs-trigger="focus" data-bs-placement="top" data-bs-content="${opcionesTexto}">?</span>
        </label>
      `;
      modalBody.appendChild(div);
    });

    // Inicializar todos los popovers
    const popoverTriggerList = [].slice.call(modalBody.querySelectorAll('[data-bs-toggle="popover"]'))
    popoverTriggerList.map(function (popoverTriggerEl) {
      return new bootstrap.Popover(popoverTriggerEl)
    });
  }

  const modal = new bootstrap.Modal(document.getElementById("modalProducto"));
  modal.show();
}

// WhatsApp
function pedirWhatsApp(){
  if(!productoSeleccionado) return alert("Seleccioná primero un producto");
  const opcion = productoSeleccionado.opciones ? document.querySelector('input[name="opcion"]:checked')?.value : null;
  let mensaje=`Hola! Quiero pedir ${productoSeleccionado.nombre}`;
  if(opcion) mensaje+=` opción ${opcion}`;
  const numero="541131121121";
  const url=`https://wa.me/${numero}?text=${encodeURIComponent(mensaje)}`;
  window.open(url,"_blank");
}

// Modo oscuro
document.addEventListener('DOMContentLoaded', () => {
  mostrarProductos();
  if(localStorage.getItem('modo') === 'dark'){
    document.body.classList.add('dark-mode');
  }
});
</script>
</body>
</html>
